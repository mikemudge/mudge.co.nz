My first project
Learning about python, flask, sqlalchemy etc.

Uses the FirstProject virtualenv.
https://virtualenvwrapper.readthedocs.org/en/latest/command_ref.html#managing-environments

###Development###
Uses docker.

To build:
docker-compose build

To run the built image:
docker-compose up -d
Then see the logs:
docker-compose logs -f app

To connect with a shell
docker-compose exec app /bin/bash

lsvirtualenv
mkvirtualenv
workon

###Production###

Restart the python app.
sudo systemctl restart gunicorn.service

Restart nginx
sudo service nginx restart

Logs location on server.
sudo systemctl status gunicorn.service

See setup here.
https://www.digitalocean.com/community/tutorials/how-to-serve-flask-applications-with-uwsgi-and-nginx-on-ubuntu-16-04

SSL Certificate
/etc/letsencrypt/live/mudge.co.nz/fullchain.pem
Using letsencrypt
https://www.digitalocean.com/community/tutorials/how-to-secure-nginx-with-let-s-encrypt-on-ubuntu-14-04
Auto renew
/opt/letsencrypt/letsencrypt-auto renew
cron this, weekly
Needs to be root cron to reload the nginx.
30 2 * * 1 /opt/letsencrypt/letsencrypt-auto renew >> /var/log/le-renew.log
35 2 * * 1 /etc/init.d/nginx reload

Mail Server
config is at.
sudo nano /etc/postfix/main.cf
sudo service postfix restart

aliases are in
sudo nano /etc/postfix/virtual
sudo postmap /etc/postfix/virtual

Postfix logs
tail -f -n100 /var/log/maillog

Could add spamassassin?
/etc/init.d/spamassassin start

Postgres setup
CREATE DATABASE "mudgeconz";
CREATE USER "mudgeconz" WITH PASSWORD 'xXBE3RcJi1ULfeo3LKENqdBZqmtzLI';
GRANT ALL PRIVILEGES ON DATABASE "mudgeconz" to "mudgeconz";
